<!doctype html><html lang="vi"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>V√≠ Pi - Huy·ªÅn B√≠ Sci-Fi</title><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/><script src="https://cdn.tailwindcss.com"></script><script src="https://s3.tradingview.com/tv.js"></script><style>html{scroll-behavior:smooth;overscroll-behavior:contain}body{background:linear-gradient(135deg,#000,#4c1d95,#000);position:relative;font-family:Inter,sans-serif;min-height:100vh;color:#e0e0e0;animation:mysticGlow 10s ease infinite}@keyframes mysticGlow{0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}body::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle,rgba(250,204,21,.1) 0,transparent 70%);opacity:.3;pointer-events:none;animation:flicker 3s ease-in-out infinite;z-index:-1}@keyframes flicker{0%,100%{opacity:.3}50%{opacity:.5}}.card{background:rgba(76,29,149,.9);backdrop-filter:blur(10px);border:1px solid rgba(250,204,21,.3);transition:transform .3s ease,box-shadow .3s ease;will-change:transform,box-shadow;border-radius:16px;box-shadow:0 4px 15px rgba(0,0,0,.3),0 0 10px rgba(250,204,21,.2);position:relative;z-index:10;overflow:visible}.card:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(0,0,0,.4),0 0 15px rgba(250,204,21,.4)}.card::after{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(250,204,21,.2) 0,transparent 70%);opacity:0;transition:opacity .5s ease;z-index:-1}.card:hover::after{opacity:1}.btn{position:relative;overflow:hidden;transition:transform .2s ease,box-shadow .3s ease;will-change:transform,box-shadow;border-radius:10px;background:linear-gradient(45deg,#00f0ff,#6b00ff);color:#fff;text-shadow:0 0 5px rgba(0,0,0,.5);border:2px solid transparent;box-shadow:0 0 10px rgba(0,240,255,.5);animation:neonPulse 2s ease infinite}@keyframes neonPulse{0%,100%{box-shadow:0 0 10px rgba(0,240,255,.5),0 0 15px rgba(107,0,255,.3)}50%{box-shadow:0 0 15px rgba(0,240,255,.8),0 0 20px rgba(107,0,255,.5)}}.btn:hover{transform:scale(1.05);box-shadow:0 4px 15px rgba(0,240,255,.7),0 0 20px rgba(107,0,255,.6);animation:none;border-color:#00f0ff}.btn::before{content:"";position:absolute;top:-2px;left:-2px;width:calc(100% + 4px);height:calc(100% + 4px);border:2px solid transparent;border-radius:12px;background:linear-gradient(45deg,#00f0ff,#6b00ff,#00f0ff) border-box;opacity:0;transition:opacity .3s ease}.btn:hover::before{opacity:1}.btn::after{content:"";position:absolute;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);width:100%;height:100%;top:0;left:-100%;transition:left .5s ease}.btn:hover::after{left:100%}.btn:disabled{background:linear-gradient(45deg,#4b5563,#1f2937);box-shadow:none;animation:none;cursor:not-allowed;opacity:.6}.btn:disabled:hover{transform:none;border-color:transparent}.spinner{border:4px solid #e0e0e0;border-top:4px solid #facc15;border-radius:50%;width:24px;height:24px;animation:spin 1s linear infinite;display:none;box-shadow:0 0 8px rgba(250,204,21,.5)}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.safe{color:#34d399;text-shadow:0 0 6px rgba(52,211,153,.4)}.unsafe{color:#f87171;text-shadow:0 0 6px rgba(248,113,113,.4)}.modal{z-index:100}.modal.show{opacity:1;transform:scale(1)}.modal .modal-content{background:rgba(76,29,149,.95);backdrop-filter:blur(10px);transform:scale(.85);transition:transform .3s ease,opacity .3s ease;border-radius:14px;box-shadow:0 5px 15px rgba(0,0,0,.4),0 0 10px rgba(250,204,21,.3)}.modal.show .modal-content{transform:scale(1);opacity:1}#toast{z-index:50}#toast.show{transform:translateX(0);opacity:1}#toast{transition:transform .3s ease,opacity .3s ease;transform:translateX(100%);opacity:0;box-shadow:0 5px 15px rgba(0,0,0,.3),0 0 8px rgba(250,204,21,.3)}input:focus,select:focus{box-shadow:0 0 8px rgba(250,204,21,.5);border-color:#facc15}.avatar{width:64px;height:64px;border-radius:8px;border:2px solid transparent;object-fit:cover;transition:all .3s ease;opacity:0;will-change:transform,box-shadow}.avatar.loaded{opacity:1}.avatar:hover{transform:scale(1.05);box-shadow:0 6px 12px rgba(0,0,0,.3),0 0 10px rgba(250,204,21,.5);border-color:#facc15}.text-gray-500{color:#d1d5db}.text-gray-600{color:#9ca3af}a{color:#facc15}#userName,h3,h4{color:#e0e0e0;text-shadow:0 0 5px rgba(250,204,21,.3)}#balanceDisplay,#checkInStatus,#pidogeBalance,#referralCode,#referralRewards,#safetyResult,#safetyScore,#safetyStatus,#safetyWarnings,#ttBalance,#walletAddress,.text-sm{color:#d1d5db}#adventureSection{position:relative}#adventureSection::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle,rgba(250,204,21,.2) 0,transparent 70%);opacity:.3;pointer-events:none;z-index:-1}#levelProgress{background:rgba(0,0,0,.5);border-radius:8px;height:8px;position:relative;overflow:hidden}#levelProgressBar{background:linear-gradient(90deg,#00f0ff,#facc15);height:100%;transition:width .5s ease;box-shadow:0 0 10px rgba(0,240,255,.5)}.container{max-width:100%;width:100%;padding:16px;box-sizing:border-box}@media (min-width:640px){.container{max-width:640px}}</style><script defer="defer" src="/pi/static/js/main.d3296291.js"></script><link href="/pi/static/css/main.3e0823dc.css" rel="stylesheet"></head><body class="min-h-screen font-sans transition-colors duration-500"><div class="container mx-auto p-4"><div id="toast" class="fixed top-4 right-4 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg"><span id="toastMessage"></span></div><div id="referralModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden modal"><div class="modal-content rounded-lg p-6 w-11/12 max-w-sm"><h3 class="text-lg font-bold mb-4">Nh·∫≠p M√£ Gi·ªõi Thi·ªáu</h3><p class="text-sm text-gray-600 mb-4">Nh·∫≠p m√£ gi·ªõi thi·ªáu t·ª´ b·∫°n c·ªßa b·∫°n ƒë·ªÉ b·∫Øt ƒë·∫ßu!</p><input id="referralCodeInput" class="w-full p-2 border rounded mb-4 focus:ring-2 focus:ring-indigo-300 transition-all duration-200" placeholder="Nh·∫≠p m√£ (v√≠ d·ª•: 001)"/><div class="flex justify-end space-x-2"><button onclick="skipReferral()" class="bg-gray-300 text-gray-800 py-2 px-4 rounded btn hover:bg-gray-400">B·ªè qua</button> <button onclick="submitReferral()" class="bg-indigo-500 text-white py-2 px-4 rounded btn hover:bg-indigo-600">X√°c nh·∫≠n</button></div></div></div><div class="card shadow-xl rounded-2xl p-6 mb-6"><div class="flex items-center mb-4"><img id="avatar" src="https://picsum.photos/80" alt="Avatar" class="avatar mr-4" loading="lazy"/><div class="flex-1"><h2 id="userName" class="text-xl font-bold">T√™n c·ªßa b·∫°n</h2></div></div><div class="mb-4"><p class="text-sm text-gray-500">V√≠: <span id="walletAddress" class="break-words text-sm text-gray-500">Ch∆∞a nh·∫≠p ƒë·ªãa ch·ªâ v√≠</span></p><p class="text-sm text-gray-500 mt-1">S·ªë d∆∞: <span id="balanceDisplay">Ch∆∞a ki·ªÉm tra</span></p><p class="text-sm text-gray-500 mt-1">M√£ gi·ªõi thi·ªáu c·ªßa b·∫°n: <span id="referralCode">Ch∆∞a c√≥</span></p></div><div class="flex space-x-2"><button onclick="copyWalletAddress()" class="flex-1 bg-indigo-500 text-white py-2 rounded-lg btn hover:bg-indigo-600">Sao ch√©p v√≠</button> <button onclick="checkBalance()" class="flex-1 bg-green-500 text-white py-2 rounded-lg btn hover:bg-green-600">Ki·ªÉm tra s·ªë d∆∞</button></div></div><div class="card shadow-xl rounded-2xl p-6 mb-6"><h3 class="text-lg font-bold mb-4">Ph·∫ßn Th∆∞·ªüng Gi·ªõi Thi·ªáu</h3><p class="text-sm mb-2">T·ªïng ph·∫ßn th∆∞·ªüng: <span id="referralRewards">0 Pidoge | 0 TT</span></p><button onclick="copyReferralLink()" class="w-full bg-indigo-500 text-white py-2 rounded-lg btn hover:bg-indigo-600">Chia s·∫ª m√£ gi·ªõi thi·ªáu</button></div><div id="adventureSection" class="card shadow-xl rounded-2xl p-6 mb-6"><h3 class="text-lg font-bold mb-4">Phi√™u L∆∞u H√†nh Tinh</h3><div class="mb-4"><p class="text-sm">C·∫•p b·∫≠c: <span id="currentLevel">Nh√† Du H√†nh M·ªõi üåü</span></p><p id="levelDescription" class="text-sm mt-1 text-gray-600">Kh√°m ph√° v≈© tr·ª• m·ªõi v·ªõi tinh th·∫ßn t√≤ m√≤!</p><p class="text-sm mt-1">L·∫ßn kh√°m ph√°: <span id="checkInCount">0</span></p><p class="text-sm mt-1">Ti·∫øn tr√¨nh: <span id="progressText">0/3</span></p><div id="levelProgress" class="mt-2"><div id="levelProgressBar" style="width:0%"></div></div></div><div class="mb-4"><p class="text-sm">Pidoge: <span id="pidogeBalance">0</span></p><p class="text-sm mt-1">TT: <span id="ttBalance">0</span></p></div><button id="checkInButton" onclick="checkIn()" class="w-full bg-indigo-500 text-white py-2 rounded-lg btn hover:bg-indigo-600">Kh√°m Ph√° H√†nh Tinh</button><p id="checkInStatus" class="text-sm mt-2 text-center"></p></div><div class="card shadow-xl rounded-2xl p-6 mb-6"><h3 class="text-lg font-bold mb-4">Gi√° Pi (USD)</h3><div id="tradingview_chart"></div></div><div class="card shadow-xl rounded-2xl p-6 mb-6"><h3 class="text-lg font-bold mb-4">Ki·ªÉm tra Web/·ª®ng d·ª•ng</h3><select id="checkType" class="w-full p-2 border rounded mb-4 focus:ring-2 focus:ring-indigo-300 transition-all duration-200"><option value="website">Trang web</option><option value="app">·ª®ng d·ª•ng</option></select> <input id="safetyUrl" class="w-full p-2 border rounded mb-4 focus:ring-2 focus:ring-indigo-300 transition-all duration-200" placeholder="Nh·∫≠p URL (v√≠ d·ª•: https://example.com ho·∫∑c link Google Play)"/><div class="flex space-x-2"><button onclick="checkSafety()" id="checkButton" class="flex-1 bg-indigo-500 text-white py-2 rounded-lg btn hover:bg-indigo-600">Ki·ªÉm tra</button> <button onclick="clearForm()" class="flex-1 bg-gray-300 text-gray-800 py-2 rounded-lg btn hover:bg-gray-400">X√≥a</button></div><div id="loadingSpinner" class="spinner mx-auto mt-4"></div><div id="safetyResult" class="mt-4 hidden"><p class="text-sm font-bold flex items-center">K·∫øt qu·∫£: <span id="safetyStatus" class="ml-2"></span> <svg id="statusIcon" class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></p><p class="text-sm">ƒêi·ªÉm tin c·∫≠y: <span id="safetyScore"></span>/100</p><p class="text-sm">C·∫£nh b√°o: <span id="safetyWarnings"></span></p></div></div><div class="card shadow-xl rounded-2xl p-6"><h3 class="text-lg font-bold mb-4">H·ªó tr·ª£</h3><p class="text-sm text-gray-600 mb-2">Li√™n h·ªá: <a href="mailto:support@example.com" class="text-indigo-500 hover:underline">support@example.com</a></p><p class="text-sm text-gray-600 mb-4">Hotline: <a href="tel:+84987654321" class="text-indigo-500 hover:underline">+84 987 654 321</a></p><h4 class="text-md font-bold mb-2">Video h∆∞·ªõng d·∫´n</h4><div class="relative" style="padding-top:56.25%"><iframe class="absolute top-0 left-0 w-full h-full rounded-lg" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng v√≠ Pi" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe></div></div><div id="withdrawModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden modal"><div class="modal-content rounded-lg p-6 w-11/12 max-w-sm"><h3 class="text-lg font-bold mb-4">R√∫t Pi</h3><p class="text-sm text-gray-600 mb-4">S·ªë d∆∞ hi·ªán t·∫°i: <span id="withdrawBalance">0 Pi</span></p><input id="withdrawAmount" type="number" step="0.01" min="0" class="w-full p-2 border rounded mb-4 focus:ring-2 focus:ring-indigo-300 transition-all duration-200" placeholder="S·ªë l∆∞·ª£ng Pi (t·ªëi thi·ªÉu 1$)"/> <input id="withdrawPassword" type="password" class="w-full p-2 border rounded mb-4 focus:ring-2 focus:ring-indigo-300 transition-all duration-200" placeholder="Nh·∫≠p m·∫≠t kh·∫©u"/><div class="flex justify-end space-x-2"><button onclick="hideWithdrawModal()" class="bg-gray-300 text-gray-800 py-2 px-4 rounded btn hover:bg-gray-400">H·ªßy</button> <button onclick="withdrawPi()" class="bg-red-500 text-white py-2 px-4 rounded btn hover:bg-red-600">R√∫t</button></div></div></div></div><script>const API_URL="https://pibackend-ptko.onrender.com",memberData={"001":{name:"HO√ÄNG VƒÇN MINH ",avatar:"https://i.imgur.com/6ceGYoC.jpeg",wallet_address:"GAB3DTZTDHAQQ2IXO4RDPMYQY3CNZABM6ZGK4HWK55QKRQ6W6QCKRSDQ",explorer_link:"https://blockexplorer.minepi.com/mainnet/accounts/GAB3DTZTDHAQQ2IXO4RDPMYQY3CNZABM6ZGK4HWK55QKRQ6W6QCKRSDQ"},"002":{name:"L√ä VƒÇN HO·∫∞NG",avatar:"https://i.imgur.com/bacHB3U.jpeg",wallet_address:"GCVBQP2M5AWPLHFLUWX7ZRSE24INWWYEYC2EI3NPQWXIL5WVXXZITGJP",explorer_link:"https://blockexplorer.minepi.com/mainnet/accounts/GCVBQP2M5AWPLHFLUWX7ZRSE24INWWYEYC2EI3NPQWXIL5WVXXZITGJP"},"003":{name:"PH·∫†M TH·ªä XU√ÇN",avatar:"https://i.imgur.com/FgV7fRT.jpeg",wallet_address:"GBDUXC2JUGEVI7N2NGLXB6B3VMUUVNUK6QI4TL5XIB2LIY3U7CDGK3B4",explorer_link:"https://blockexplorer.minepi.com/mainnet/accounts/GBDUXC2JUGEVI7N2NGLXB6B3VMUUVNUK6QI4TL5XIB2LIY3U7CDGK3B4"},"004":{name:"L√ä TH·ªä H∆Ø∆†NG",avatar:"https://i.imgur.com/qPmerTD.jpeg",wallet_address:"GCWRIG2I5BNCTN5HXSMAYPQC45MRY7BQFX6AUUPAKTGACFZLBDGJG7I3",explorer_link:"https://blockexplorer.minepi.com/mainnet/accounts/GCWRIG2I5BNCTN5HXSMAYPQC45MRY7BQFX6AUUPAKTGACFZLBDGJG7I3"},"005":{name:"L√ä TR·ªåNG KHOA",avatar:"https://i.imgur.com/h2G4JTA.jpeg",wallet_address:"GDMBS366RAH5STHNFCH3QWLV4VNK2U77TGFU7WEG66ZFGMHGOWZCHDOZ",explorer_link:"https://blockexplorer.minepi.com/mainnet/accounts/GDMBS366RAH5STHNFCH3QWLV4VNK2U77TGFU7WEG66ZFGMHGOWZCHDOZ"},"006":{name:"HO√ÄNG VƒÇN TR·ª§",avatar:"https://i.imgur.com/wNUTVEz.jpeg",wallet_address:"GC4QQVU6A4EWTNCW4235WUOQ5FHKBOF57RKO2EPTIXDJKRYTLXZOHSGN",explorer_link:"https://blockexplorer.minepi.com/mainnet/accounts/GC4QQVU6A4EWTNCW4235WUOQ5FHKBOF57RKO2EPTIXDJKRYTLXZOHSGN"},"007":{name:"MINH TRANG",avatar:"https://i.imgur.com/HskgNhC.jpeg",wallet_address:"GD7M2UZCORSH4AJUJJN2V56MAA33OCIMYMRJ6OXMBQPG5T2FJ4OZ6TA6",explorer_link:"https://blockexplorer.minepi.com/mainnet/accounts/GD7M2UZCORSH4AJUJJN2V56MAA33OCIMYMRJ6OXMBQPG5T2FJ4OZ6TA6"},"008":{name:"L√ä TH·ªä H√Ä",avatar:"https://i.imgur.com/zAX7aF4.jpeg",wallet_address:"GAL4V2DVKA437NPZT2B6NEQA7AJ4BE53OCKQUXNJ44G3Z3IJF3BGZ7SS",explorer_link:"https://blockexplorer.minepi.com/mainnet/accounts/GAL4V2DVKA437NPZT2B6NEQA7AJ4BE53OCKQUXNJ44G3Z3IJF3BGZ7SS"}};function showToast(e,t="success"){const n=document.getElementById("toast");document.getElementById("toastMessage").textContent=e,n.classList.remove("bg-green-500","bg-red-500"),n.classList.add("success"===t?"bg-green-500":"bg-red-500"),n.classList.remove("hidden"),n.classList.add("show"),setTimeout((()=>{n.classList.remove("show"),n.classList.add("hidden")}),3e3)}let currentUserTagId=null;function loadUserData(){const e=new URLSearchParams(window.location.search).get("tag_id");currentUserTagId=e;const t=document.getElementById("userName"),n=document.getElementById("walletAddress"),a=document.getElementById("avatar"),o=document.getElementById("referralCode");if(e&&memberData[e]){const r=memberData[e];t.textContent=r.name,n.textContent=r.wallet_address,a.src=r.avatar,o.textContent=e}else t.textContent="Kh√¥ng t√¨m th·∫•y th√¥ng tin",n.textContent="Kh√¥ng t√¨m th·∫•y ƒë·ªãa ch·ªâ v√≠",a.src="https://picsum.photos/80",o.textContent="Kh√¥ng c√≥",showToast("Tag ID kh√¥ng h·ª£p l·ªá!","error");a.onload=()=>{a.classList.add("loaded")},a.onerror=()=>{console.warn(`Kh√¥ng th·ªÉ t·∫£i h√¨nh ·∫£nh: ${a.src}`),"https://picsum.photos/seed/fallback/80"!==a.src?a.src="https://picsum.photos/seed/fallback/80":(showToast("Kh√¥ng th·ªÉ t·∫£i h√¨nh ·∫£nh ƒë·∫°i di·ªán!","error"),a.classList.add("loaded"))}}function autoCheckBalanceFromURL(){const e=new URLSearchParams(window.location.search).get("wallet");e&&(document.getElementById("walletAddress").textContent=e,checkBalance())}function checkBalance(){const e=document.getElementById("walletAddress").textContent;if(!e||"Kh√¥ng t√¨m th·∫•y ƒë·ªãa ch·ªâ v√≠"===e)return void showToast("Kh√¥ng c√≥ ƒë·ªãa ch·ªâ v√≠ ƒë·ªÉ ki·ªÉm tra!","error");const t=`https://blockexplorer.minepi.com/mainnet/accounts/${e}`;window.location.href=t}function copyWalletAddress(){const e=document.getElementById("walletAddress").textContent;"Kh√¥ng t√¨m th·∫•y ƒë·ªãa ch·ªâ v√≠"!==e?navigator.clipboard.writeText(e).then((()=>{showToast("ƒê√£ sao ch√©p ƒë·ªãa ch·ªâ v√≠!")})).catch((()=>{showToast("Kh√¥ng th·ªÉ sao ch√©p ƒë·ªãa ch·ªâ v√≠!","error")})):showToast("Kh√¥ng c√≥ ƒë·ªãa ch·ªâ v√≠ ƒë·ªÉ sao ch√©p!","error")}function copyReferralLink(){const e=currentUserTagId;if(!e||!memberData[e])return void showToast("Kh√¥ng c√≥ m√£ gi·ªõi thi·ªáu ƒë·ªÉ chia s·∫ª!","error");const t=`${window.location.origin}${window.location.pathname}?tag_id=${e}&referrer=${e}`;navigator.clipboard.writeText(t).then((()=>{showToast("ƒê√£ sao ch√©p li√™n k·∫øt gi·ªõi thi·ªáu!")})).catch((()=>{showToast("Kh√¥ng th·ªÉ sao ch√©p li√™n k·∫øt!","error")}))}function showReferralModal(){const e=document.getElementById("referralModal");e.classList.remove("hidden"),e.classList.add("show")}function hideReferralModal(){const e=document.getElementById("referralModal");e.classList.remove("show"),e.classList.add("hidden")}async function submitReferral(){const e=document.getElementById("referralCodeInput").value.trim();if(e)if(memberData[e])if(e!==currentUserTagId)try{const t=await fetch(`${API_URL}/api/referrals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userTagId:currentUserTagId,referralCode:e})});if(!t.ok)throw new Error("L·ªói khi l∆∞u m√£ gi·ªõi thi·ªáu");await t.json();checkInData.referrer=e,saveCheckInData(),hideReferralModal(),showToast("ƒê√£ l∆∞u m√£ gi·ªõi thi·ªáu th√†nh c√¥ng!")}catch(e){console.error("Error submitting referral:",e),showToast(`L·ªói: ${e.message}`,"error")}else showToast("B·∫°n kh√¥ng th·ªÉ t·ª± gi·ªõi thi·ªáu ch√≠nh m√¨nh!","error");else showToast("M√£ gi·ªõi thi·ªáu kh√¥ng h·ª£p l·ªá!","error");else showToast("Vui l√≤ng nh·∫≠p m√£ gi·ªõi thi·ªáu!","error")}function skipReferral(){checkInData.referrer=null,saveCheckInData(),hideReferralModal(),showToast("ƒê√£ b·ªè qua b∆∞·ªõc nh·∫≠p m√£ gi·ªõi thi·ªáu!")}function showWithdrawModal(){const e=document.getElementById("withdrawModal");e.classList.remove("hidden"),e.classList.add("show")}function hideWithdrawModal(){const e=document.getElementById("withdrawModal");e.classList.remove("show"),e.classList.add("hidden")}function withdrawPi(){const e=parseFloat(document.getElementById("withdrawAmount").value),t=document.getElementById("withdrawPassword").value,n=document.getElementById("withdrawStatus");!e||e<.01?showToast("S·ªë l∆∞·ª£ng Pi ph·∫£i l·ªõn h∆°n 0 v√† t·ªëi thi·ªÉu 1$!","error"):t?(n.textContent="ƒêang x·ª≠ l√Ω...",setTimeout((()=>{n.textContent="ƒê√£ g·ª≠i y√™u c·∫ßu r√∫t Pi",showToast("Y√™u c·∫ßu r√∫t Pi ƒë√£ ƒë∆∞·ª£c g·ª≠i!"),hideWithdrawModal()}),1500)):showToast("Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u!","error")}function checkSafety(){const e=document.getElementById("checkButton"),t=document.getElementById("loadingSpinner"),n=document.getElementById("safetyResult"),a=document.getElementById("safetyStatus"),o=document.getElementById("safetyScore"),r=document.getElementById("safetyWarnings");e.disabled=!0,t.style.display="block",n.classList.add("hidden"),setTimeout((()=>{t.style.display="none",n.classList.remove("hidden");const c=Math.random()>.5;n.classList.remove("safe","unsafe"),n.classList.add(c?"safe":"unsafe"),a.textContent=c?"An to√†n":"Kh√¥ng an to√†n",o.textContent=c?"85":"30",r.textContent=c?"Kh√¥ng c√≥ c·∫£nh b√°o":"Trang web c√≥ th·ªÉ kh√¥ng ƒë√°ng tin c·∫≠y",e.disabled=!1,showToast(c?"Ki·ªÉm tra th√†nh c√¥ng: An to√†n!":"Ki·ªÉm tra th√†nh c√¥ng: Kh√¥ng an to√†n!",c?"success":"error")}),1500)}function clearForm(){document.getElementById("safetyUrl").value="",document.getElementById("safetyResult").classList.add("hidden"),showToast("ƒê√£ x√≥a bi·ªÉu m·∫´u!")}const levels=[{name:"Nh√† Du H√†nh M·ªõi üåü",minCheckIns:0,pidoge:5,tt:2,next:3,description:"Kh√°m ph√° v≈© tr·ª• m·ªõi v·ªõi tinh th·∫ßn t√≤ m√≤!"},{name:"Th√°m Hi·ªÉm Sao H·ªèa üî¥",minCheckIns:3,pidoge:10,tt:5,next:6,description:"Sao H·ªèa - ƒê·∫•t ƒë·ªè b√≠ ·∫©n ch·ªù b·∫°n chinh ph·ª•c!"},{name:"L·ªØ Kh√°ch M·ªôc Tinh ü™ê",minCheckIns:6,pidoge:15,tt:8,next:10,description:"M·ªôc Tinh - V√πng ƒë·∫•t c·ªßa nh·ªØng c∆°n b√£o kh·ªïng l·ªì!"},{name:"Ng∆∞·ªùi B·∫£o V·ªá Th·ªï Tinh üí´",minCheckIns:10,pidoge:20,tt:12,next:15,description:"Th·ªï Tinh - V√≤ng ƒëai √°nh s√°ng r·ª±c r·ª°!"},{name:"Chi·∫øn Binh Thi√™n V∆∞∆°ng üåå",minCheckIns:15,pidoge:25,tt:15,next:21,description:"Thi√™n V∆∞∆°ng - H√†nh tinh l·∫°nh gi√° ƒë·∫ßy b√≠ ·∫©n!"},{name:"Huy·ªÅn Tho·∫°i H·∫£i V∆∞∆°ng üåä",minCheckIns:21,pidoge:30,tt:20,next:28,description:"H·∫£i V∆∞∆°ng - Bi·ªÉn xanh th·∫≥m trong v≈© tr·ª•!"},{name:"K·∫ª Chinh Ph·ª•c D·∫£i Ng√¢n H√† ‚ú®",minCheckIns:28,pidoge:40,tt:25,next:36,description:"D·∫£i Ng√¢n H√† - V√πng tr·ªùi sao v√¥ t·∫≠n!"},{name:"Ch√∫a T·ªÉ V≈© Tr·ª• üå†",minCheckIns:36,pidoge:50,tt:30,next:45,description:"V≈© tr·ª• - Quy·ªÅn nƒÉng t·ªëi th∆∞·ª£ng trong tay b·∫°n!"},{name:"Huy·ªÅn Tho·∫°i V√¥ T·∫≠n ü™ê‚ú®",minCheckIns:45,pidoge:60,tt:40,next:1/0,description:"V√¥ T·∫≠n - Ch·ªß nh√¢n c·ªßa m·ªçi h√†nh tinh!"}];let checkInData={count:0,lastCheckIn:null,pidoge:0,tt:0,referrer:null,referralRewards:{pidoge:0,tt:0}};async function loadCheckInData(){const e=new URLSearchParams(window.location.search).get("referrer");try{const t=await fetch(`${API_URL}/api/checkin/${currentUserTagId}`);if(t.ok)checkInData=await t.json();else{if(404!==t.status)throw new Error("L·ªói khi t·∫£i d·ªØ li·ªáu check-in");e&&memberData[e]&&e!==currentUserTagId&&(checkInData.referrer=e,await saveCheckInData())}}catch(e){console.error("Error loading check-in data:",e),showToast(`L·ªói: ${e.message}`,"error");const t=localStorage.getItem(`checkInData_${currentUserTagId}`);t&&(checkInData=JSON.parse(t))}updateAdventureUI(),updateCheckInButton(),updateReferralRewardsUI(),checkInData.referrer||e||showReferralModal()}async function saveCheckInData(){try{if(!(await fetch(`${API_URL}/api/checkin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userTagId:currentUserTagId,...checkInData})})).ok)throw new Error("L·ªói khi l∆∞u d·ªØ li·ªáu check-in");localStorage.setItem(`checkInData_${currentUserTagId}`,JSON.stringify(checkInData))}catch(e){console.error("Error saving check-in data:",e),showToast(`L·ªói: ${e.message}`,"error"),localStorage.setItem(`checkInData_${currentUserTagId}`,JSON.stringify(checkInData))}}function getCurrentLevel(e){return levels.find((t=>e>=t.minCheckIns&&e<t.next))||levels[levels.length-1]}function updateAdventureUI(){const e=getCurrentLevel(checkInData.count),t=(levels.find((t=>t.minCheckIns===e.next)),e.next===1/0?100:(checkInData.count-e.minCheckIns)/(e.next-e.minCheckIns)*100);document.getElementById("currentLevel").textContent=e.name,document.getElementById("levelDescription").textContent=e.description,document.getElementById("checkInCount").textContent=checkInData.count,document.getElementById("progressText").textContent=`${checkInData.count}/${e.next===1/0?checkInData.count:e.next}`,document.getElementById("levelProgressBar").style.width=`${t}%`,document.getElementById("pidogeBalance").textContent=checkInData.pidoge,document.getElementById("ttBalance").textContent=checkInData.tt}function updateReferralRewardsUI(){document.getElementById("referralRewards").textContent=`${checkInData.referralRewards.pidoge} Pidoge | ${checkInData.referralRewards.tt} TT`}function updateCheckInButton(){const e=document.getElementById("checkInButton"),t=document.getElementById("checkInStatus"),n=Date.now(),a=checkInData.lastCheckIn?n-checkInData.lastCheckIn:1/0,o=864e5;if(a<o){e.disabled=!0;const n=o-a,r=Math.floor(n/36e5),c=Math.floor(n%36e5/6e4),s=Math.floor(n%6e4/1e3);t.textContent=`Ch·ªù ${r}h ${c}m ${s}s ƒë·ªÉ kh√°m ph√° ti·∫øp`,setTimeout(updateCheckInButton,1e3)}else e.disabled=!1,t.textContent="S·∫µn s√†ng kh√°m ph√° h√†nh tinh m·ªõi!"}async function checkIn(){const e=Date.now();if((checkInData.lastCheckIn?e-checkInData.lastCheckIn:1/0)<864e5)showToast("B·∫°n ƒë√£ kh√°m ph√° h√¥m nay, h√£y quay l·∫°i sau!","error");else try{const t=getCurrentLevel(checkInData.count+1),n=await fetch(`${API_URL}/api/checkin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userTagId:currentUserTagId,count:checkInData.count+1,lastCheckIn:e,pidoge:checkInData.pidoge+t.pidoge,tt:checkInData.tt+t.tt,referrer:checkInData.referrer,referralRewards:checkInData.referralRewards})});if(!n.ok)throw new Error("L·ªói khi th·ª±c hi·ªán check-in");const a=await n.json();if(checkInData.count=a.count,checkInData.lastCheckIn=a.lastCheckIn,checkInData.pidoge=a.pidoge,checkInData.tt=a.tt,checkInData.referrer){const e=.15*t.pidoge,n=.15*t.tt;(await fetch(`${API_URL}/api/checkin/${checkInData.referrer}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralRewards:{pidoge:(checkInData.referralRewards.pidoge||0)+e,tt:(checkInData.referralRewards.tt||0)+n}})})).ok&&showToast(`Ng∆∞·ªùi gi·ªõi thi·ªáu c·ªßa b·∫°n nh·∫≠n ${e} Pidoge v√† ${n} TT!`)}saveCheckInData(),updateAdventureUI(),updateCheckInButton(),updateReferralRewardsUI(),showToast(`Kh√°m ph√° th√†nh c√¥ng! Nh·∫≠n ${t.pidoge} Pidoge v√† ${t.tt} TT!`,"success")}catch(e){console.error("Error during check-in:",e),showToast(`L·ªói: ${e.message}`,"error")}}document.addEventListener("DOMContentLoaded",(()=>{loadUserData(),autoCheckBalanceFromURL(),loadCheckInData();const e=document.getElementById("tradingview_chart"),t=new IntersectionObserver((e=>{e[0].isIntersecting&&(new TradingView.widget({width:"100%",height:250,symbol:"OKX:PIUSDT",interval:"D",timezone:"Etc/UTC",theme:"dark",style:"1",locale:"en",toolbar_bg:"#1a1a3d",enable_publishing:!1,allow_symbol_change:!0,container_id:"tradingview_chart"}),t.disconnect())}),{rootMargin:"100px"});t.observe(e)}))</script></body></html>